<?php
/**
 * Helper class for generating source code
 */
require_once "../config.php";
require_once($GLOBALS['GAME_ROOT'] . "Protocol/XByteArray.php");
require_once($GLOBALS['GAME_ROOT'] . "Classes/AESMcryptMgr.php");

require_once($GLOBALS['GAME_ROOT'] . "ProtoSource/pb_proto_bcdown.php");
require_once($GLOBALS['GAME_ROOT'] . "ProtoSource/pb_proto_bcup.php");
require_once($GLOBALS['GAME_ROOT'] . "ProtoSource/pb_proto_down.php");
require_once($GLOBALS['GAME_ROOT'] . "ProtoSource/pb_proto_up.php");


//UpMsg.sdk_login
//$source = "\x08\x00\xb2\x02\x24\x0a\x20\x62\x64\x36\x65\x63\x64\x35\x63\x37\x39\x32\x36\x38\x33\x36\x63\x32\x62\x65\x62\x66\x65\x37\x66\x66\x36\x39\x38\x33\x34\x36\x61\x10\x67";

//UpMsg.tavern_draw(有值) && Tutorial
//$source = "\x08\x00\x10\x93\x6a\xd2\x01\x00\x82\x02\xb4\x01\x08\x00\x08\x01\x08\x01\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x01\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00";

//UpMsg.tavern_draw(全空) && Tutorial
//$source = "\x08\x00\x10\x93\x6a\xd2\x01\x02\x10\x03\x82\x02\xb4\x01\x08\x00\x08\x01\x08\x01\x08\x01\x08\x00\x08\x00\x08\x00\x08\x01\x08\x01\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x01\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00";

//Down_SdkLoginReply
//$source = "\x92\x02\x31\x08\x00\x12\x07\x34\x37\x38\x33\x35\x38\x33\x22\x24\x68\x74\x74\x70\x3a\x2f\x2f\x34\x32\x2e\x39\x36\x2e\x31\x39\x35\x2e\x32\x38\x3a\x38\x30\x2f\x6c\x65\x6d\x6f\x6e\x5f\x61\x6e\x64\x72\x6f\x69\x64\xc8\x02\x97\x8a\xf9\x9a\x05";

//UpMsg.Login
//$source = "\x08\x00\x1a\x18\x08\x00\x12\x07\x76\x69\x73\x69\x74\x6f\x72\x1a\x0b\x31\x2e\x38\x2e\x32\x2e\x31\x32\x37\x32\x33";

//Down_LoginReply
//$source = "\x0a\xb8\x07\x08\x00\x12\xb3\x07\x08\x93\x6a\x12\x0e\x0a\x08\x4e\x69\x63\x6b\x4e\x61\x6d\x65\x10\x00\x18\x01\x18\x01\x20\x00\x28\x01\x30\x00\x38\x00\x42\x10\x08\x3c\x10\xf3\x8a\xf9\x9a\x05\x18\x00\x20\x8e\xfd\xf8\x9a\x05\x52\x44\x08\x02\x10\x01\x18\x01\x20\x01\x28\x00\x30\x5a\x38\x01\x38\x01\x38\x15\x38\x29\x42\x06\x08\x01\x10\x00\x18\x00\x42\x06\x08\x02\x10\x00\x18\x00\x42\x06\x08\x03\x10\x00\x18\x00\x42\x06\x08\x04\x10\x00\x18\x00\x42\x06\x08\x05\x10\x00\x18\x00\x42\x06\x08\x06\x10\x00\x18\x00\x52\x44\x08\x03\x10\x01\x18\x01\x20\x01\x28\x00\x30\x5a\x38\x01\x38\x01\x38\x15\x38\x29\x42\x06\x08\x01\x10\x00\x18\x00\x42\x06\x08\x02\x10\x00\x18\x00\x42\x06\x08\x03\x10\x00\x18\x00\x42\x06\x08\x04\x10\x00\x18\x00\x42\x06\x08\x05\x10\x00\x18\x00\x42\x06\x08\x06\x10\x00\x18\x00\x52\x44\x08\x01\x10\x01\x18\x01\x20\x01\x28\x00\x30\x5a\x38\x01\x38\x01\x38\x15\x38\x29\x42\x06\x08\x01\x10\x00\x18\x00\x42\x06\x08\x02\x10\x00\x18\x00\x42\x06\x08\x03\x10\x00\x18\x00\x42\x06\x08\x04\x10\x00\x18\x00\x42\x06\x08\x05\x10\x00\x18\x00\x42\x06\x08\x06\x10\x00\x18\x00\x62\x10\x08\x0a\x10\x8e\xfd\xf8\x9a\x05\x18\x00\x20\x8e\xfd\xf8\x9a\x05\x7a\x16\x20\x8e\xfd\xf8\x9a\x05\x2a\x08\x08\x8e\xfd\xf8\x9a\x05\x10\x00\x38\x8e\xfd\xf8\x9a\x05\x88\x01\x00\x88\x01\x01\x88\x01\x01\x88\x01\x01\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x01\x88\x01\x01\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x01\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x88\x01\x00\x92\x01\x08\x08\x28\x10\x01\x18\x01\x20\x00\xa0\x01\xf3\x8a\xf9\x9a\x05\xaa\x01\x06\x08\x01\x10\x00\x18\x00\xaa\x01\x06\x08\x02\x10\x00\x18\x00\xaa\x01\x06\x08\x04\x10\x00\x18\x00\xaa\x01\x06\x08\x05\x10\x00\x18\x00\xaa\x01\x06\x08\x06\x10\x00\x18\x00\xaa\x01\x06\x08\x07\x10\x00\x18\x00\xaa\x01\x06\x08\x08\x10\x00\x18\x00\xaa\x01\x06\x08\x0a\x10\x00\x18\x00\xaa\x01\x06\x08\x0b\x10\x00\x18\x00\xaa\x01\x06\x08\x0c\x10\x00\x18\x00\xaa\x01\x06\x08\x0d\x10\x00\x18\x02\xaa\x01\x06\x08\x0f\x10\x00\x18\x00\xaa\x01\x06\x08\x10\x10\x00\x18\x00\xaa\x01\x06\x08\x11\x10\x00\x18\x00\xaa\x01\x06\x08\x12\x10\x00\x18\x00\xaa\x01\x06\x08\x13\x10\x00\x18\x00\xaa\x01\x06\x08\x14\x10\x00\x18\x00\xaa\x01\x06\x08\x15\x10\x00\x18\x00\xaa\x01\x06\x08\x16\x10\x00\x18\x00\xaa\x01\x06\x08\x17\x10\x00\x18\x00\xaa\x01\x06\x08\x18\x10\x00\x18\x00\xaa\x01\x06\x08\x19\x10\x00\x18\x00\xaa\x01\x06\x08\x1a\x10\x00\x18\x00\xaa\x01\x06\x08\x1b\x10\x00\x18\x00\xaa\x01\x06\x08\x1c\x10\x00\x18\x00\xaa\x01\x06\x08\x1d\x10\x00\x18\x00\xaa\x01\x06\x08\x1e\x10\x00\x18\x00\xaa\x01\x06\x08\x1f\x10\x00\x18\x00\xaa\x01\x06\x08\x20\x10\x00\x18\x00\xb2\x01\x0c\x08\x01\x10\x04\x18\xc2\xfe\xf8\x9a\x05\x20\x00\xb2\x01\x08\x08\x02\x10\x01\x18\x00\x20\x00\xb2\x01\x0c\x08\x03\x10\x00\x18\xe5\xfe\xf8\x9a\x05\x20\x00\xba\x01\x08\x08\x8e\xfd\xf8\x9a\x05\x10\x00\xc2\x01\x0a\x08\x03\x10\x01\x18\x8e\xfd\xf8\x9a\x05\xda\x01\x04\x08\x02\x10\x00\xda\x01\x04\x08\x01\x10\x00\xea\x01\x06\x08\x00\x12\x00\x20\x00\xf2\x01\x08\x08\x0a\x10\xf3\x8a\xf9\x9a\x05\xc8\x02\xf3\x8a\xf9\x9a\x05";

//tutorial/ask_magicsoul
//$source = "\x08\x00\x10\x93\x6a\x82\x02\xb4\x01\x08\x01\x08\x01\x08\x01\x08\x01\x08\x00\x08\x00\x08\x00\x08\x01\x08\x01\x08\x01\x08\x01\x08\x01\x08\x01\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x01\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x08\x00\x92\x03\x00";

//Down_AskMagicsoulReply
//$source = "\xda\x01\x02\x08\x00\xc8\x02\xbc\x8b\xf9\x9a\x05\xf2\x02\x0a\x00\x08\x00\x7e\x00\x82\x01\x00\x90\x01";

//TavernDraw null
//$source = "\x08\x00\x10\x93\x6a\xd2\x01\x00";

//Down_TavernDrawReply
//$source = "\xaa\x01\x03\x08\x9d\x09\xc8\x02\xea\x8b\xf9\x9a\x05";

//object(GetMaillist)#2 (0)
//$source = "\x08\x00\x10\x93\x6a\xd2\x02\x00";

//object(GetMaillist)#2 (0) repeat = 1
//$source = "\x08\x01\x10\x93\x6a\xd2\x02\x00";

//Down_GetMaillistReply
//$source = "\xba\x02\x00\xc8\x02\xb3\x8c\xf9\x9a\x05";


$source ="\x3b\x00\x92\x02\x31\x08\x00\x12\x07\x34\x37\x38\x33\x35\x38\x33\x22\x24\x68\x74\x74\x70\x3a\x2f\x2f\x34\x32\x2e\x39\x36\x2e\x31\x39\x35\x2e\x32\x38\x3a\x38\x30\x2f\x6c\x65\x6d\x6f\x6e\x5f\x61\x6e\x64\x72\x6f\x69\x64\xc8\x02\xa0\xac\xf9\x9a\x05";
$dest = "\x8a\xde\x3a\xcd\x22\x55\x27\x37\xaa\xa1\xf8\x8b\x7f\xe9\x3d\x0d\xfe\xfa\x25\xc1\x86\x9d\xe2\x73\x8a\xad\x04\xbe\x5e\x13\xa1\x5f\x0a\x96\x40\x3b\x81\xd9\x9b\x06\xc8\xb9\xec\xa6\x2e\x66\x85\x11\x12\x06\x66\x7a\x2b\x46\xec\x33\xe7\x17\xfe\x56\xb9\xd6\xae\x7e";

$crypt1 = new AESMcryptMgr();
$source1 = $crypt1->encrypt($source);
echo "\nsource1=" . BytesToString ($source1, strlen($source1), " ") . "\n";

$crypt2 = new AESMcryptMgr();
$dest1 = $crypt2->decrypt($dest);
echo "\ndest1=" . BytesToString ($dest1, strlen($dest1), " ") . "\n";


$by = new XByteArray();
$by->set_data($dest1);
$len = $by->readInt16();

$len = $by->getBytesAvailable();
$byStr = $by->readUTF($len);
echo "\nby=" . BytesToString ($byStr, $len, " ") . "\n";
echo "\nlen=" . $len . "\n";

$newObj = new Down_DownMsg();
$newObj->parseFromString($byStr);
var_dump($newObj);

exit;